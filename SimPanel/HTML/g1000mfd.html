<!DOCTYPE html>
<html>

<head>
    <title>SVG.js</title>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>



        <script src="js/utils.js"></script>

        <script src="./js/instruments/views.js"></script>
        <script src="./js/instruments/numpad.js"></script>
        <script src="./js/instruments/keyboard.js"></script>
        <script src="./js/instruments/compass.js"></script>
        <script src="./js/instruments/counter.js"></script>
        <script src="./js/instruments/attitudeindicator.js"></script>
        <script src="./js/instruments/altimeter.js"></script>
        <script src="./js/instruments/gs_indicator.js"></script>
        <script src="./js/instruments/speedindicator.js"></script>
        <script src="./js/instruments/flapscontrol.js"></script>
        <script src="./js/instruments/trimindicator.js"></script>
        <script src="./js/instruments/g1000/panel_top.js"></script>
        <script src="./js/instruments/g1000/panel_left.js"></script>
        <script src="./js/instruments/g1000/panel_right.js"></script>
        <script src="./js/instruments/g1000/panel_bottom.js"></script>
        <script src="./js/instruments/map.js"></script>
        <script src="./js/instruments/warnings.js"></script>
        <script src="./js/instruments/switchpanel.js"></script>
        <script src="./js/instruments/g1000mfd.js"></script>

    <script src="js/leaflet.rotatedMarker.js"></script>
    <script src="js/leaflet.geometryutil.js"></script>

    <style>
        #container {
            width: 100%;
            height: 768px;
            margin: 0;
            display: -ms-inline-flexbox;
        }

        #left {
            float: left;
            display: -ms-inline-flexbox;
            margin-top: 0;
            margin-left: 0;
            margin-right: 0;
            margin-bottom: 0;
            width: 160px;
            height: 768px;
            background-color: wheat;
        }

        #map {
            display: -ms-inline-flexbox;
            margin-top: 45px;
            margin-left: 160px;
            margin-right: 0;
            margin-bottom: 0;
            width: 1206px;
            height: 653px;

            background-color: black;

        }
    </style>
</head>

<body style="background: white; margin: 0px; padding:0px">

    <div id="map"></div>
    <svg id="panel_right" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
        width="160" height="768" viewBox="0 0 160 768" style="position: absolute; left: 0; top:0">
        <rect x="0" y="0" width="100%" height="100%" fill="black"></rect>
    </svg>

     <svg id="panel_top" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
        width="1206" height="45" viewBox="0 0 1206 45" style="position: absolute; left: 160px; top:0">
        <rect x="0" y="0" width="100%" height="100%" fill="black"></rect>
    </svg>

    <svg id="panel_bottom" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
    width="1206" height="70" viewBox="0 0 1206 70" style="position: absolute; left: 160px; top:698px">
    <rect x="0" y="0" width="100%" height="100%" fill="black"></rect>
</svg>

    <!-- <div id="left">
            <svg id="g1000" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
                width="100%" height="768" >
                <rect x="0" y="0" width="200px" height="768px" fill="#0066ff"></rect>
            </svg>
        </div> -->
    <!-- <div id="map" style="width: 85%; height: 100%;overflow: hidden; position: absolute; top:0px; left: 15%; iborder: 3px solid black; ">
    </div> -->
    <svg id="ws_status" id="g1000" xmlns="http://www.w3.org/2000/svg" version="1.1"
        xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" viewBox="0 0 32 32"
        style="position: absolute; top:40px; left: 165px; ">

        <path fill="red"
            d="M21,16V14L13,9V3.5A1.5,1.5 0 0,0 11.5,2A1.5,1.5 0 0,0 10,3.5V9L2,14V16L10,13.5V19L8,20.5V22L11.5,21L15,22V20.5L13,19V13.5L21,16Z"
            transform='rotate(45, 10,10)'>
            <animate attributeType="XML" attributeName="fill" values="#f00;#ff0;" dur="0.8s" repeatCount="indefinite" />
        </path>
    </svg>
    <!-- <script>

        var request_num = 0;
        this.MAP = new Map(document.getElementById("map"));


    </script> -->
    <script>
        var g1000 = document.getElementById("panel_glass");
        var topLayer = document.getElementById("topLayer");
        var panel = document.getElementById("panel");
        var map = document.getElementById("panel");
        //var svg = SVG().addTo(g1000);
        var Settings = null;

        var ws_status = document.getElementById("ws_status");

        window.onload = function () {
            getJSON("/js/settings.json", function (e, d) {
                if (e == null) {
                    Settings = d;
                    var MFD = new G1000MFD(d.websocket_url, Settings.airplanes[0]);   
                    MFD.connect();                

                } else  {
                    alert("Could not load the settings\nReson code: " + e)
                }

            });
        };
    </script>

</body>

</html>